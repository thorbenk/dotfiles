# dotbot configuration file
# 
# See https://github.com/anishathalye/dotbot

- defaults:
    link:
      create: true
      relink: true

- clean:
    - ~/.config

- shell:
    - [git submodule update --init --recursive, Initializing git submodules]
    - description: Installing tools and dependencies
      command: ./install.py
      stdout: true
      stderr: true

- link:
    # ZSH configuration
    ~/.zshrc: zshrc
    ~/.zprofile: zprofile

    # Neovim configuration
    ~/.config/nvim: nvim

    # Tmux configuration
    ~/.tmux.conf: tmux.conf
    ~/.tmux: tmux

    # Zed editor configuration
    ~/.config/zed/tasks.json: zed/tasks.json
    ~/.config/zed/settings.json: zed/settings.json
    ~/.config/zed/keymap.json: zed/keymap.json
    ~/.config/zed/debug.json: zed/debug.json

    # Codex
    ~/.codex/config.toml: codex/config.toml

    # Systemd user services
    ~/.config/systemd/user/ydotoold.service: services/ydotool/ydotoold.service

    # Desktop applications
    ~/.local/share/applications/dictation-indicator.desktop: applications/dictation-indicator.desktop

    # Autostart dictation indicator
    ~/.config/autostart/dictation-indicator.desktop: applications/dictation-indicator.desktop
    
    # Note: install.py handles tool installation (fd, bat, delta, lazygit, nvim, etc.)
    # Run './install.py --check' to see tool versions
    # Run './install.py --update-lock' to update to latest releases

- shell:
    - description: Installing tmux plugins
      command: |
        if [ -f ~/.tmux/plugins/tpm/bin/install_plugins ]; then
          export TMUX_PLUGIN_MANAGER_PATH='$HOME/.tmux/plugins/'
          ~/.tmux/plugins/tpm/bin/install_plugins
          echo "Tmux plugins installed successfully."
        else
          echo "Warning: tmux plugin manager (tpm) not found. Please ensure git submodules are initialized."
        fi
      stdout: true
      stderr: true
